<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Attendance Tracker</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 20px;
      background: linear-gradient(135deg, #e0f7fa, #fff3e0);
      color: #333;
    }

    h1 {
      text-align: center;
      color: #00695c;
      margin-bottom: 30px;
    }

    .student {
      background-color: #ffffffcc;
      padding: 15px;
      border-radius: 10px;
      border: 1px solid #ccc;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    .student span {
      margin-right: 10px;
    }

    .status {
      font-weight: bold;
      min-width: 100px;
      color: #455a64;
    }

    button {
      padding: 6px 12px;
      border: none;
      border-radius: 6px;
      font-size: 14px;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    button:hover {
      opacity: 0.9;
    }

    .controls {
      text-align: center;
      margin-top: 30px;
    }

    .controls button {
      background-color: #f57c00;
      color: white;
      margin: 5px;
    }

    button.present {
      background-color: #43a047;
      color: white;
    }

    button.absent {
      background-color: #e53935;
      color: white;
    }

    h2 {
      margin-top: 40px;
      color: #37474f;
    }

    p {
      font-size: 16px;
      line-height: 1.6;
    }

    #present-rolls, #absent-rolls {
      display: inline-block;
      max-width: 100%;
      word-wrap: break-word;
      color: #0277bd;
    }
  </style>
</head>
<body>
  <h1>Attendance Tracker</h1>
  <div id="student-list"></div>

  <div class="controls">
    <button onclick="resetAttendance()">Reset Attendance</button>
    <button onclick="location.reload()">Reload Page</button>
  </div>

  <h2>Summary</h2>
  <p>Total Present: <span id="total-present">0</span></p>
  <p>Total Absent: <span id="total-absent">0</span></p>
  <p>Present Roll Numbers: <span id="present-rolls"></span></p>
  <p>Absent Roll Numbers: <span id="absent-rolls"></span></p>

  <script>
    const start_number = parseInt(prompt("Enter a starting roll number:"));
    const ending_number = parseInt(prompt("Enter an ending roll number:"));

    const studentListDiv = document.getElementById("student-list");
    const status = {};

    let allStudentsHTML = "";
    for (let i = start_number; i <= ending_number; i++) {
      status[i] = "Absent";  // Default status is now "Absent"

      allStudentsHTML += `
        <div class="student" id="student-${i}">
          <span>Roll No. ${i}</span>
          <span class="status" id="status-${i}">Absent</span>
          <button class="present" onclick="markAttendance(${i}, 'Present')">Present</button>
          <button class="absent" onclick="markAttendance(${i}, 'Absent')">Absent</button>
        </div>
      `;
    }
    studentListDiv.innerHTML = allStudentsHTML;
    updateSummary(); // Update summary right after initial rendering

    function markAttendance(roll, newStatus) {
      status[roll] = newStatus;
      document.getElementById(`status-${roll}`).innerText = newStatus;
      updateSummary();
    }

    function resetAttendance() {
      for (let roll in status) {
        status[roll] = "Absent";  // Reset to "Absent"
        document.getElementById(`status-${roll}`).innerText = "Absent";
      }
      updateSummary();
    }

    function updateSummary() {
      let presentCount = 0;
      let absentCount = 0;
      let presentRolls = [];
      let absentRolls = [];

      for (const roll in status) {
        if (status[roll] === "Present") {
          presentCount++;
          presentRolls.push(roll);
        } else if (status[roll] === "Absent") {
          absentCount++;
          absentRolls.push(roll);
        }
      }

      document.getElementById("total-present").innerText = presentCount;
      document.getElementById("total-absent").innerText = absentCount;
      document.getElementById("present-rolls").innerText = presentRolls.join(", ");
      document.getElementById("absent-rolls").innerText = absentRolls.join(", ");
    }
  </script>
</body>
</html>
